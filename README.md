# Lesson_TG05. Работа с внешними API.

---

# Телеграм-бот для получения погоды, курсов валют и топа фильмов

Этот проект представляет собой телеграм-бота, разработанного с использованием библиотеки [aiogram](https://docs.aiogram.dev/). Бот предоставляет пользователям информацию о текущей погоде, курсах валют и топе фильмов.

## Особенности

- **Погода**: Получение текущей погоды в указанном городе.
- **Курс валют**: Получение курса валют между двумя указанными валютами и просмотр списка доступных валют.
- **Топ фильмов**: Получение информации о топ-5 фильмах, включая описание и ссылку на IMDb.

## Требования

Перед запуском проекта убедитесь, что у вас установлены все необходимые библиотеки. Вы можете установить их, используя `pip`:

```bash
pip install -r requirements.txt
```

## Структура проекта

### 1. `config.py`

Этот файл содержит конфигурации для бота, включая API-ключи для различных сервисов. Используется для загрузки переменных окружения из `.env` файла.

- `TELEGRAM_API_TOKEN`: Токен для работы с Telegram Bot API.
- `WEATHER_API_KEY`: Ключ API для получения данных о погоде.
- `EXCHANGE_API_KEY`: Ключ API для получения данных о курсах валют.
- `X_RAPID_API_KEY`: Ключ API для получения данных о фильмах.

### 2. `hw_TG05.py`

Файл с основным кодом бота. Он содержит логику обработки команд и взаимодействия с пользователем, включая команды для получения погоды, курсов валют и топа фильмов.

### 3. `requirements.txt`

Содержит список всех зависимостей проекта. Убедитесь, что все библиотеки установлены.

### 4. `utils/weather.py`

Модуль для получения данных о текущей погоде. Использует API [WeatherAPI](https://www.weatherapi.com/) для получения информации о погоде в указанном городе.

**Функции**:

- `get_weather(api_key: str, city: str) -> str`: Возвращает строку с текущей погодой в указанном городе, используя предоставленный API-ключ.

### 5. `utils/currency.py`

Модуль для получения данных о курсах валют. Использует API [ExchangeRate-API](https://www.exchangerate-api.com/) для получения курсов валют и списка доступных валют.

**Функции**:

- `get_exchange_rate(api_key: str, base_currency: str, target_currency: str) -> str`: Возвращает строку с курсом обмена между двумя валютами.
- `get_all_currencies(api_key: str) -> str`: Возвращает список всех доступ

ных валют.

### 6. `utils/movies.py`

Модуль для получения информации о топ-5 фильмах. Использует API [IMDb Top 100 Movies](https://rapidapi.com/) для получения списка топ-100 фильмов, затем выбирает 5 случайных фильмов. Также переводит данные на русский язык с помощью [Deep Translator](https://deep-translator.readthedocs.io/).

**Функции**:

- `get_random_movies(api_key: str) -> list`: Возвращает список из 5 случайных фильмов с информацией о них.

## Настройка

1. Создайте файл `.env` в корневом каталоге проекта и добавьте свои API-ключи:

    ```env
    TELEGRAM_API_TOKEN=ваш_токен_бота
    WEATHER_API_KEY=ваш_ключ_погоды
    EXCHANGE_API_KEY=ваш_ключ_валют
    X_RAPID_API_KEY=ваш_ключ_имдб
    ```

2. Запустите бота:

    ```bash
    python hw_TG05.py
    ```

## Лицензия

Этот проект предоставляется под лицензией MIT. См. [LICENSE](LICENSE) для получения дополнительной информации.

